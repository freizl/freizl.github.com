<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<style type=text/css>body{font-family:monospace}</style>
<title>Shell Tips</title>
<link rel=stylesheet href=../../css/style.css>
</head>
<body>
<header>
=================<br>
== <a href=https://freizl.github.io/>Corner case</a> ==<br>
=================
<div style=float:right>Welcome to my new blog!</div><br>
<p>
<nav>
<a href=../../><b>Start</b></a>.
</header>
<main>
<article>
<h1>Shell Tips</h1>
<b><time>04/06/2012</time></b>
<a href=../../tags/shell>shell</a>
<div>
<h2 id=quicklinks>Quicklinks</h2>
<ul>
<li><a href=http://bash.cyberciti.biz/guide/What%5Fis%5Fa%5FSubshell%3F>What is a
Subshell</a></li>
<li><a href=http://en.wikipedia.org/wiki/List%5Fof%5FUnix%5Futilities>List of Unix
utilities</a></li>
<li><a href="http://www-128.ibm.com/developerworks/aix/library/au-badunixhabits.html?ca=lnxw01GoodUnixHabits">10
Good Unix habits</a></li>
</ul>
<h2 id=reference>Reference</h2>
<ul>
<li>() execute command in subshell</li>
<li>{} execute command in currecnt shell Usage is same with () expect the
final command in the list ends with a semicolon.</li>
</ul>
<h2 id=sample-section-a>Sample Section A</h2>
<h3 id=grep>grep</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>  grep -Elr --include=*.xsd --exclude-dir={branches,tags} VendorDesc.xsd $DIRECTORY
  ### count process and exclude grep itself
  ps aux | grep vpnc | grep -v grep -c
</code></pre></div><h3 id=find>find</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>  find ${1} \( -name Consume*wsdl -o -name Produce*wsdl \) -path *trunk*
  find $update_dir \( -name &#39;*.java&#39; \) \( -path &#39;**/source/**&#39; -o -path &#39;**/test/**&#39; -o -path &#39;**/resource/**&#39; \)
</code></pre></div><h3 id=awk>awk</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>  ### list all time of each ping
  awk -F&#34;=&#34; &#39;/time=/ {print substr($4,0,length($4)-3) }&#39; &lt; ping.log
  ### passing shell parameter to awk scripts
  svn st ${dirs} | awk -F&#34; &#34; -v ac=&#34;${*}&#34; &#39; /&#39;${predicate}&#39;/ &amp;&amp; (index($2,&#34;\\&#34;)==0 || gsub(/\\/,&#34;/&#34;,$2)) {print ac, $2}&#39;
  ### change Output Row Separator
  awk &#39; BEGIN { ORS = &#34; &#34; } { print }&#39;
</code></pre></div><h3 id=sed>sed</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>  ll | sed &#39;/Stores\|Test\|^-\|^t/d&#39; | wc
  smbclient -L \\\\hangzhou2\\twitters -U foobar | sed &#39;/Hangzhou20/,$d&#39;
  export BEA_IP=`/sbin/ifconfig eth0 | sed &#39;/inet addr/!d;s/.*addr:\([^ ]\+\).*/\1/g&#39;`
</code></pre></div><h3 id=cp>cp</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>  cp filename{,.bak}
</code></pre></div><h2 id=sample-section-b>Sample Section B</h2>
<h3 id=while>while</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>  while getopts &#34;ðŸ†Žc&#34; opt; do
      case $opt in
      a ) echo &#34;I am a&#34; ;;
      b ) echo $OPTARG  ;;
      c ) echo &#34;i am c&#34; ;;
      ? ) echo &#34;usage : $0 [-a] [-b barg] [-c] args ..&#34;
          exit 1 ;;
      esac
      shift $(($OPTIND - 1))
  done
</code></pre></div><h3 id=for>for</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>  for s in $(echo $string | sed &#34;s/;/ /g&#34;); do
      echo $s
  done
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>  for (( i=1; i&lt;=$n; i++ )) do
     ls -1 &#34;${file_pattern}&#34; | sed &#39;s#\(.*\)\(.xml\).bak#cp &amp; \1&#39;&#34;_$i&#34;&#39;\2#g&#39;
  done
</code></pre></div><h3 id=case>case</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>  case $action in
      backup ) tar cfj &#34;$backup_dir/$bakfile&#34; * --exclude &#34;jobs/*/workspace&#34; ;;
      rest | restore ) tar xfj $backup_dir/$bakfile ;;
      * ) echo &#34;all supported actions: backup | rest[ore]&#34; ; exit 0 ;;
  esac
</code></pre></div>
</div>
</article>
</main>
<aside>
<div>
<div>
<h3>LATEST POSTS</h3>
</div>
<div>
<ul>
<li><a href=../../posts/hello-hugo/>Hello Hugo</a></li>
<li><a href=../../posts/improve-space-usage/>Improve Space Usage</a></li>
<li><a href=../../posts/snaplet-request-local-state/>Snaplet Request Local State</a></li>
<li><a href=../../posts/chinese-tag-in-hakyll/>Chinese Tag In Hakyll</a></li>
<li><a href=../../posts/confused-constructor-js/>Confused Constructor Js</a></li>
</ul>
</div>
</div>
</aside>
<footer>
<p>&copy; 2021 <a href=https://freizl.github.io/><b>Haisheng Wu</b></a>.
</p>
</footer>
</body>
</html>