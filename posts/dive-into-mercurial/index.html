<!doctype html><html lang=en-us><head><link rel=preload href=../../lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Dive into mercurial | Corner case</title><link rel=canonical href=https://freizl.github.io/posts/dive-into-mercurial/><meta name=description content="Welcome to my personal blog."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Dive into mercurial"><meta property="og:description" content="IMHO Mercurial is using the Tree structure idea to manipulate the so-called &rsquo;trunk/branches/tags&rsquo; which probably because of its storage scheme revlog.
This tree has only one top (r0) and one end. In case this rule is being broken, merge comes in.
The following graph show a common scenario that one person change something base on r2.
After he make the change, revision goes to 6.
In Subversion, if person do update base on r5, he will get the change which is at r6."><meta property="og:type" content="article"><meta property="og:url" content="https://freizl.github.io/posts/dive-into-mercurial/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2010-08-21T07:59:00-07:00"><meta property="article:modified_time" content="2010-08-21T07:59:00-07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Dive into mercurial"><meta name=twitter:description content="IMHO Mercurial is using the Tree structure idea to manipulate the so-called &rsquo;trunk/branches/tags&rsquo; which probably because of its storage scheme revlog.
This tree has only one top (r0) and one end. In case this rule is being broken, merge comes in.
The following graph show a common scenario that one person change something base on r2.
After he make the change, revision goes to 6.
In Subversion, if person do update base on r5, he will get the change which is at r6."><link rel=stylesheet href=https://freizl.github.io/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://freizl.github.io/images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=../../>Home</a></li><li><a href=../../posts>All posts</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../bookmarks.html>Bookmarks</a></li><li><a href=../../readings.html>Readings</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://freizl.github.io/posts/operation-enum/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=https://freizl.github.io/posts/how-to-boot-system-to-run-level-s/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&text=Dive%20into%20mercurial" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&title=Dive%20into%20mercurial" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&is_video=false&description=Dive%20into%20mercurial" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Dive%20into%20mercurial&body=Check out this article: https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&title=Dive%20into%20mercurial" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&title=Dive%20into%20mercurial" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&name=Dive%20into%20mercurial&description=IMHO%20Mercurial%20is%20using%20the%20Tree%20structure%20idea%20to%20manipulate%20the%20so-called%20%26rsquo%3btrunk%2fbranches%2ftags%26rsquo%3b%20which%20probably%20because%20of%20its%20storage%20scheme%20revlog.%0aThis%20tree%20has%20only%20one%20top%20%28r0%29%20and%20one%20end.%20In%20case%20this%20rule%20is%20being%20broken%2c%20merge%20comes%20in.%0aThe%20following%20graph%20show%20a%20common%20scenario%20that%20one%20person%20change%20something%20base%20on%20r2.%0aAfter%20he%20make%20the%20change%2c%20revision%20goes%20to%206.%0aIn%20Subversion%2c%20if%20person%20do%20update%20base%20on%20r5%2c%20he%20will%20get%20the%20change%20which%20is%20at%20r6." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&t=Dive%20into%20mercurial" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Dive into mercurial</h1><div class=meta><div class=postdate><time datetime="2010-08-21 07:59:00 -0700 -0700" itemprop=datePublished>2010-08-21</time></div></div></header><div id=toc><nav id=TableOfContents></nav></div><div class=content itemprop=articleBody><p>IMHO <a href=http://mercurial.selenic.com/>Mercurial</a> is using the Tree structure idea to manipulate the so-called &rsquo;trunk/branches/tags&rsquo; which probably because of its <a href="http://selenic.com/mercurial/wiki/index.cgi/Presentations?action=AttachFile&do=get&target=ols-mercurial-paper.pdf">storage scheme</a> revlog.</p><p>This tree has only one top (r0) and one end. In case this rule is being broken, merge comes in.</p><p>The following graph show a common scenario that one person change something base on r2.<br>After he make the change, revision goes to 6.<br>In <a href=http://subversion.tigris.org/>Subversion</a>, if person do update base on r5, he will get the change which is at r6.<br>Therefore Subversion need create another folder branches/tags to track change by name.</p><p>By contract, Mercurial will ask for merge because it predicates there are two headers r5 and r6 (broke the rules of that Tree).<br>After merge, new revision r7 created which has parent r5 and r6. (The storage schema revlog always doing append)<br>So the Tree has one end again.</p><p>Doing the change (commit) truns to be extending the tree by appeding nodes start from one specific node.</p><p>0 -> 1 -> 2 -> 3 -> 4 -> 5<br>-&mdash;&mdash;&mdash;&mdash;&mdash;-> 6</p><p>My understanding of tag/branch in mercurial just give each node (revision) a name(alias).<br>While the branch tracks the change after being branched, tag does not do that.<br>Therefore we are able to check out any branches/tags without introducing extra folders.</p><p><strong><em>Further reading including but not limit to storage scheme and examples.</em></strong></p></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=../../>Home</a></li><li><a href=../../posts>All posts</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../bookmarks.html>Bookmarks</a></li><li><a href=../../readings.html>Readings</a></li></ul></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&text=Dive%20into%20mercurial" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&title=Dive%20into%20mercurial" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&is_video=false&description=Dive%20into%20mercurial" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Dive%20into%20mercurial&body=Check out this article: https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&title=Dive%20into%20mercurial" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&title=Dive%20into%20mercurial" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&name=Dive%20into%20mercurial&description=IMHO%20Mercurial%20is%20using%20the%20Tree%20structure%20idea%20to%20manipulate%20the%20so-called%20%26rsquo%3btrunk%2fbranches%2ftags%26rsquo%3b%20which%20probably%20because%20of%20its%20storage%20scheme%20revlog.%0aThis%20tree%20has%20only%20one%20top%20%28r0%29%20and%20one%20end.%20In%20case%20this%20rule%20is%20being%20broken%2c%20merge%20comes%20in.%0aThe%20following%20graph%20show%20a%20common%20scenario%20that%20one%20person%20change%20something%20base%20on%20r2.%0aAfter%20he%20make%20the%20change%2c%20revision%20goes%20to%206.%0aIn%20Subversion%2c%20if%20person%20do%20update%20base%20on%20r5%2c%20he%20will%20get%20the%20change%20which%20is%20at%20r6." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2ffreizl.github.io%2fposts%2fdive-into-mercurial%2f&t=Dive%20into%20mercurial" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 Haisheng Wu</div><div class=footer-right><nav><ul><li><a href=../../>Home</a></li><li><a href=../../posts>All posts</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../bookmarks.html>Bookmarks</a></li><li><a href=../../readings.html>Readings</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=../../lib/font-awesome/css/all.min.css><script src=../../lib/jquery/jquery.min.js></script>
<script src=../../js/main.js></script>
<script src=../../js/code-copy.js></script></html>