<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="author" content="HaishengWu" />
        <meta name="keywords" content="Haskell, JavaScript, Programming, Web" />
        <meta name="description" content="Haisheng programming life" />

        <title>Î» Corner - Shell Tips</title>
        <link rel="alternate" type="application/rss+xml" title="Haisheng's Blog" href="rss.xml" />
        <link rel="icon" type="image/png" href="../images/favicon.ico" />
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <script>
         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
             (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                                  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
         ga('create', 'UA-6496210-5', 'freizl.github.io');
         ga('send', 'pageview');
        </script>
    </head>

    <body>
        <div id="main">

            <nav>
                <a href="../" class>HOME</a>
                <span> / </span>
                <a href="../posts.html">POSTS</a>
            </nav>

            <div class="container">
                <div class="boxer">

    <h1>Shell Tips</h1>

    <div class="soft">
        <span>April  6, 2012, Tags: </span><a href="../tags/shell.html">shell</a>
    </div>

    <div class="body clear">
        
<h2 id="quicklinks">Quicklinks</h2>
<ul>
<li>[[http://bash.cyberciti.biz/guide/What_is_a_Subshell%3F][What is a Subshell]]</li>
<li>[[http://en.wikipedia.org/wiki/List_of_Unix_utilities][List of Unix utilities]]</li>
<li>[[http://www-128.ibm.com/developerworks/aix/library/au-badunixhabits.html?ca=lnxw01GoodUnixHabits][10 Good Unix habits]]</li>
</ul>
<h2 id="reference">Reference</h2>
<ul>
<li>() execute command in subshell</li>
<li>{} execute command in currecnt shell Usage is same with () expect the final command in the list ends with a semicolon.</li>
</ul>
<h2 id="sample-section-a">Sample Section A</h2>
<h3 id="grep">grep</h3>
<pre class="sh"><code>grep -Elr --include=*.xsd --exclude-dir={branches,tags} VendorDesc.xsd $DIRECTORY
### count process and exclude grep itself
ps aux | grep vpnc | grep -v grep -c</code></pre>
<h3 id="find">find</h3>
<pre class="sh"><code>find ${1} \( -name Consume*wsdl -o -name Produce*wsdl \) -path *trunk*
find $update_dir \( -name '*.java' \) \( -path '**/source/**' -o -path '**/test/**' -o -path '**/resource/**' \)</code></pre>
<h3 id="awk">awk</h3>
<pre class="sh"><code>### list all time of each ping
awk -F&quot;=&quot; '/time=/ {print substr($4,0,length($4)-3) }' &lt; ping.log
### passing shell parameter to awk scripts
svn st ${dirs} | awk -F&quot; &quot; -v ac=&quot;${*}&quot; ' /'${predicate}'/ &amp;&amp; (index($2,&quot;\\&quot;)==0 || gsub(/\\/,&quot;/&quot;,$2)) {print ac, $2}'
### change Output Row Separator
awk ' BEGIN { ORS = &quot; &quot; } { print }'</code></pre>
<h3 id="sed">sed</h3>
<pre class="sh"><code>ll | sed '/Stores\|Test\|^-\|^t/d' | wc
smbclient -L \\\\hangzhou2\\twitters -U foobar | sed '/Hangzhou20/,$d'
export BEA_IP=`/sbin/ifconfig eth0 | sed '/inet addr/!d;s/.*addr:\([^ ]\+\).*/\1/g'`</code></pre>
<h3 id="cp">cp</h3>
<pre class="sh"><code>cp filename{,.bak}</code></pre>
<h2 id="sample-section-b">Sample Section B</h2>
<h3 id="while">while</h3>
<pre class="sh"><code>while getopts &quot;:ab:c&quot; opt; do
	case $opt in
	a ) echo &quot;I am a&quot; ;;
	b ) echo $OPTARG  ;;
	c ) echo &quot;i am c&quot; ;;
	? ) echo &quot;usage : $0 [-a] [-b barg] [-c] args ..&quot;
	    exit 1 ;;
	esac
    shift $(($OPTIND - 1))
done</code></pre>
<h3 id="for">for</h3>
<pre class="sh"><code>for s in $(echo $string | sed &quot;s/;/ /g&quot;); do
	echo $s
done</code></pre>
<pre class="sh"><code>for (( i=1; i&lt;=$n; i++ )) do
   ls -1 &quot;${file_pattern}&quot; | sed 's#\(.*\)\(.xml\).bak#cp &amp; \1'&quot;_$i&quot;'\2#g'
done</code></pre>
<h3 id="case">case</h3>
<pre class="sh"><code>case $action in
    backup ) tar cfj &quot;$backup_dir/$bakfile&quot; * --exclude &quot;jobs/*/workspace&quot; ;;
    rest | restore ) tar xfj $backup_dir/$bakfile ;;
    * ) echo &quot;all supported actions: backup | rest[ore]&quot; ; exit 0 ;;
esac</code></pre>
    </div>

    <div class="clear"></div>

</div>

            </div>

            <footer>
                Copyright 2009-2015 Haisheng Wu /
                <a href="https://github.com/freizl/">Github</a>
                <span> / </span>
                <a href="../rss.xml" type="application/rss+xml">RSS</a>
                <span> / site generated by </span>
                <a href="http://github.com/jaspervdj/hakyll">Hakyll</a>
            </footer>

        </div>
    </body>
</html>
